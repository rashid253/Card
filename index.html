<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Digital Card Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0f172a">

<link rel="stylesheet"
 href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
:root{
 --primary:#2563eb;
 --dark:#0f172a;
 --bg:#f1f5f9;
}

*{box-sizing:border-box}

body{
 margin:0;
 font-family:system-ui,-apple-system,Segoe UI,Roboto;
 background:var(--bg);
 color:var(--dark);
}

header{
 background:var(--dark);
 color:#fff;
 padding:16px;
 text-align:center;
 font-size:18px;
 font-weight:600;
}

form{
 padding:16px;
 max-width:520px;
 margin:auto;
}

label{
 font-size:14px;
 font-weight:600;
 display:block;
 margin:14px 0 6px;
}

input,textarea{
 width:100%;
 padding:12px;
 border-radius:10px;
 border:1px solid #cbd5f5;
 font-size:15px;
}

textarea{resize:vertical}

button{
 width:100%;
 margin-top:20px;
 padding:14px;
 border:none;
 border-radius:14px;
 background:linear-gradient(90deg,var(--primary),var(--dark));
 color:#fff;
 font-size:16px;
 font-weight:700;
 cursor:pointer;
}

button:active{transform:scale(.98)}

.note{
 text-align:center;
 font-size:13px;
 color:#475569;
 margin-top:10px;
}
</style>
</head>

<body>

<header>
 Digital Visiting Card Generator
</header>

<form id="cardForm">

<label>Name</label>
<input id="name" required placeholder="Your full name">

<label>Business Name</label>
<input id="businessName" placeholder="Business / Shop name">

<label>Phone</label>
<input id="phone" required placeholder="03XXXXXXXXX">

<label>Email</label>
<input id="email" placeholder="example@email.com">

<label>Address</label>
<input id="address" placeholder="Shop or office address">

<label>Profile Image URL</label>
<input id="profileImage" placeholder="Direct image URL">

<label>About Business</label>
<textarea id="about" rows="3"
 placeholder="Short business description"></textarea>

<button type="submit">
 Generate Digital Card
</button>

<div class="note">
 Card will open instantly after generation
</div>

</form>

<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>
/* ---------- SUPABASE ---------- */
const db = supabase.createClient(
 "https://dfvnefbxgayxqgjjgtrr.supabase.co",
 "sb_publishable_WypeFELCIlVDlqGY4PdWwA_snqoPUSE"
);

/* ---------- FORM SUBMIT ---------- */
document.getElementById("cardForm")
.addEventListener("submit",async e=>{
 e.preventDefault();

 const data={
  name:name.value,
  businessName:businessName.value,
  phone:phone.value,
  email:email.value,
  address:address.value,
  profileImage:profileImage.value,
  businessInfo:about.value
 };

 const res=await db.from("cards").insert({
  data:JSON.stringify(data)
 }).select().single();

 if(res.data){
  localStorage.setItem("last_card_id",res.data.id);
  location.href="card.html?id="+res.data.id;
 }else{
  alert("Error creating card");
 }
});
</script>

</body>
</html>
